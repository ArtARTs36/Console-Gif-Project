#!/usr/bin/env php
<?php

use App\Console\Command\ClearCache;
use App\Console\Command\PrintStat;
use App\Console\Kernel;
use Core\Console\ConsolePrinter;
use Core\Console\Contracts\ConsoleOutput;

require_once __DIR__ . '/../vendor/autoload.php';

/** @var \Core\Contracts\Container $container */
$container = include __DIR__ . '/../app/bootstrap.php';

$container->contract(ConsoleOutput::class, ConsolePrinter::class);

$kernel = $container
    ->make(Kernel::class)
    ->add(ClearCache::class)
    ->add(PrintStat::class);

$kernel->handle($_SERVER['argv'] ?? []);
